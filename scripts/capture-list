#!/bin/bash

source functions.sh

if [ -n "${KCS_CORR_RX}" ] ; then
  rxip=${KCS_CORR_RX%:*}
  rxport=${KCS_CORR_RX##*:}
else
  if [ ! -f ${CORR_CONFIG}/${KATCP_MODE} ] ; then
    kcs_warn "no configuration for ${KATCP_MODE}"
  fi
  rxip=$(grep ^rx_udp_ip ${CORR_CONFIG}/${KATCP_MODE} | cut -f2 -d= | tr -d ' ' )
  rxport=$(grep ^rx_udp_port ${CORR_CONFIG}/${KATCP_MODE} | cut -f2 -d= | tr -d ' ' )
fi

if [ -z "${rxip}" ] ; then
  rxip=unknown
fi

if [ -z "${rxport}" ] ; then
  rxport=unknown
fi

echo "#capture-list k7 ${rxip} ${rxport}"

exit 0
